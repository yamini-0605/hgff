from fastapi import FastAPI, UploadFile, File, Form
from fastapi.middleware.cors import CORSMiddleware

app = FastAPI()

# Allow frontend requests
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

@app.get("/")
def root():
    return {"message": "Backend is running fine ✅"}

# 1️⃣ Upload PDF
@app.post("/upload")
async def upload_pdf(file: UploadFile = File(...)):
    return {"message": f"Uploaded {file.filename} successfully!"}

# 2️⃣ Summarize
@app.get("/summarize")
def summarize():
    # Dummy response for now
    return {"summary": "This is a sample summary of the uploaded PDF."}

# 3️⃣ Ask Question
@app.post("/ask")
async def ask_question(question: str = Form(...)):
    # Dummy response for now
    return {"answer": f"You asked: {question}. Here’s a sample answer."}
